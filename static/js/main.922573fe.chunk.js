(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{146:function(e,t,a){e.exports=a.p+"static/media/Rectangle 1.1197b293.svg"},162:function(e,t,a){e.exports=a.p+"static/media/Vector.d17fcd0b.svg"},163:function(e,t,a){e.exports=a.p+"static/media/path4.756bd122.svg"},170:function(e,t,a){e.exports=a(378)},179:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},349:function(e,t){},368:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){},376:function(e,t,a){},377:function(e,t,a){},378:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),s=a.n(c),l=a(3),i=a(49),o=a(145),m=a(5),u=a(42),f={page:1,totalPage:0,articles:[],isLoading:!1,tags:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=Object(u.a)({},e);switch(a){case"ARTICLE_UPDATE":return Object.assign(n,{articles:r});case"ARTICLE_PAGE":return Object.assign(n,{page:r});case"ARTICAL_TOTAL_PAGE_UPDATE":return Object.assign(n,{totalPage:r});case"FETCH_ARTICAL_LOAD":return Object.assign(n,{isLoading:r});case"ARTICLE_UPDATE_NEW":case"ARTICLE_DELETE":return Object.assign(n,{articles:[r].concat(Object(m.a)(n.articles))});case"FETCH_ARTICLE_LIKE_FAVORITE_UPDATE":var c=n.articles.findIndex((function(e){return e.slug===r.slug}));if(-1!==c){var s=Object(m.a)(n.articles);s[c]=r.value,n.articles=s}return n;default:return n}},d={user:{},isAuthentication:!1,isAuthenticationOkey:!0,isRegisterOkey:!0},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=Object(u.a)({},e);switch(a){case"FETCH_USER_AUTHENTICATION":return console.log(2,r),Object.assign(n,{user:r.user,isAuthentication:!0});case"FETCH_USER_AUTHENTICATION_ERROR":return Object.assign(n,{isAuthenticationOkey:!1});case"FETCH_USER_AUTHORIZED":return Object.assign(n,{isAuthentication:r});case"FETCH_USER_REGISTER_ERROR":return Object.assign(n,{isRegisterOkey:!1});case"USER_LOGOUT":return d;default:return n}},E=Object(i.c)({articles:p,user:_}),b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,h=Object(i.e)(E,b(Object(i.a)(o.a))),g=a(15),N=a(13),O="https://conduit.productionready.io/api",v={"Content-Type":"application/json; charset=utf-8"},j=function(e){return{type:"FETCH_USER_AUTHENTICATION",payload:e}},y=function(e){return{type:"FETCH_USER_AUTHENTICATION_ERROR",payload:e}},T=function(e){return{type:"FETCH_USER_REGISTER_ERROR",payload:e}},w=function(e){return{type:"FETCH_USER_AUTHORIZED",payload:e}},A=function(e){return{type:"FETCH_ARTICAL_LOAD",payload:e}},S=function(e,t){fetch("".concat(O,"/articles?limit=20&offset=").concat(20*t)).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(t){var a=t.articles,r=t.articlesCount;e(function(e){return{type:"ARTICAL_TOTAL_PAGE_UPDATE",payload:e}}(r)),e(function(e){return{type:"ARTICLE_UPDATE",payload:e}}(a)),e(A(!0))})).catch(console.error)},k=function(e,t,a,r){fetch("".concat(O,"/articles/").concat(t,"/favorite"),{method:r?"POST":"DELETE",headers:Object.assign(v,{Authorization:"Token ".concat(a)})}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(a){a.article&&e(function(e,t){return{type:"FETCH_ARTICLE_LIKE_FAVORITE_UPDATE",payload:{slug:e,value:t}}}(t,a.article))})).catch(console.error)},x=(a(179),a(146)),C=a.n(x),L=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.articles.page})),a=Object(l.c)((function(e){return e.user.isAuthentication})),c=Object(l.c)((function(e){return e.user.user}));Object(r.useEffect)((function(){!function(e){try{var t=localStorage.getItem("uuid");if(t){var a=JSON.parse(t).token;a&&fetch("".concat(O,"/user"),{headers:Object.assign(v,{Authorization:"Token ".concat(a)})}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(t){e(j(t)),e(w(!0))})).catch(console.error)}}catch(r){console.error(r)}}(e)}),[]),Object(r.useEffect)((function(){S(e,t)}),[e,t]);var s;if(a){var i=c.username,o=c.image;s=n.a.createElement(n.a.Fragment,null,n.a.createElement(g.b,{to:"/new-article"},n.a.createElement("input",{type:"button",value:"Create article",className:"btn btn-create-article"})),n.a.createElement("div",{className:"article-user"},n.a.createElement("div",{className:"user-info"},n.a.createElement(g.b,{to:"/profile"},n.a.createElement("h6",{className:"user-info__name"},i))),n.a.createElement("div",{className:"article-user__photo"},n.a.createElement(g.b,{to:"/profile"},n.a.createElement("img",{src:o||C.a,alt:i,className:"article-user__img"})))),n.a.createElement("input",{type:"button",onClick:function(){e((localStorage.removeItem("uuid"),{type:"USER_LOGOUT"}))},value:"Log Out",className:"btn btn-logout"}))}else s=n.a.createElement(n.a.Fragment,null,n.a.createElement(g.b,{to:"/sign-in"},n.a.createElement("input",{type:"button",value:"Sign In",className:"btn btn-signin controls__btn-signin"})),n.a.createElement(g.b,{to:"/sign-up"},n.a.createElement("input",{type:"button",value:"Sign Up",className:"btn btn-signup"})));return n.a.createElement("div",{className:"wrapper"},n.a.createElement(g.a,null,n.a.createElement("header",{className:"header wrapper__header"},n.a.createElement(g.b,{to:"/"},n.a.createElement("h6",{className:"header__title"},"Realworld Blog")),n.a.createElement("div",{className:"controls"},s)),n.a.createElement("main",{className:"main"},n.a.createElement(N.d,null,n.a.createElement(N.b,{path:"/",component:q,exact:!0}),n.a.createElement(N.b,{path:"/articles",exact:!0,component:q}),n.a.createElement(N.b,{path:"/articles/:slug",exact:!0,component:X}),n.a.createElement(N.b,{path:"/articles/:slug/edit",component:le}),n.a.createElement(N.b,{path:"/sign-in",component:te}),n.a.createElement(N.b,{path:"/sign-up",component:re}),n.a.createElement(N.b,{path:"/profile",component:Q}),n.a.createElement(N.b,{path:"/new-article",component:se}),n.a.createElement(N.a,{to:"/"})))))},R=a(11),F=a(382),I=(a(181),function(e){var t=e.slug,a=e.title,c=e.description,s=e.updatedAt,i=e.favoritesCount,o=e.tagList,m=e.favorited,u=e.author,f=u.username,p=u.image,d=Object(r.useState)(m),_=Object(R.a)(d,2),E=_[0],b=_[1],h=Object(l.c)((function(e){return e.user.user.token})),N=Object(l.b)();return n.a.createElement("article",{className:"article"},n.a.createElement("div",{className:"article-info"},n.a.createElement("div",{className:"article-info__header"},n.a.createElement(g.b,{to:"articles/".concat(t)},n.a.createElement("h5",{className:"article-info__title"},a)),n.a.createElement("span",{className:"article-info__likes"},n.a.createElement(pe,{favorited:m,handleLikeArticle:function(){b(!E),k(N,t,h,!E)}}),n.a.createElement("span",{className:"article-info__likes-count"},i))),n.a.createElement("div",{className:"tags"},n.a.createElement(ce,{tagList:o})),n.a.createElement("div",{className:"article-info__desc"},n.a.createElement("p",{className:"article-info__text"},c))),n.a.createElement("div",{className:"article-container"},n.a.createElement("div",{className:"article-user"},n.a.createElement("div",{className:"user-info"},n.a.createElement("h6",{className:"user-info__name"},f),n.a.createElement("p",{className:"user-info__update"},Object(F.a)(new Date(s),"MMMM dd, yyyy"))),n.a.createElement("div",{className:"article-user__photo"},n.a.createElement("img",{src:p,alt:f,className:"article-user__img"})))))}),U=a(64),z=a(381),P=a(380),D=a(384),H=(a(182),a(183),n.a.createElement(D.a,{style:{fontSize:24},spin:!0})),q=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.articles.articles})),a=Object(l.c)((function(e){return e.articles.isLoading})),r=Object(l.c)((function(e){return e.articles.totalPage})),c=Object(l.c)((function(e){return e.articles.page}));return t&&a?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"article-list"},t.map((function(e){return n.a.createElement(I,Object.assign({key:Object(U.a)()},e))}))),n.a.createElement(z.a,{onChange:function(t){e(function(e){return{type:"ARTICLE_PAGE",payload:e}}(t)),e(A(!1))},size:"small",total:r,showSizeChanger:!0,pageSize:20,current:c})):n.a.createElement(P.a,{indicator:H})},M=a(12),V=a.n(M),J=a(29),G=a(160),Y=a.n(G),$=a(383),B=(a(368),function(){var e=Object(J.a)(V.a.mark((function e(t){var a,r,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,n=r.article,e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),K=n.a.createElement(D.a,{style:{fontSize:24},spin:!0}),W=function(){var e=Object(J.a)(V.a.mark((function e(t,a,r){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:(n=e.sent)&&(a(n),r(!0));case 4:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),X=function(){var e=Object(r.useState)(),t=Object(R.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!1),i=Object(R.a)(s,2),o=i[0],m=i[1],u=Object(r.useState)(!1),f=Object(R.a)(u,2),p=f[0],d=f[1],_=Object(N.h)().slug,E=Object(N.g)(),b=Object(l.b)(),h=Object(l.c)((function(e){return e.user.user.token})),j=Object(l.c)((function(e){return e.user.isAuthentication})),y=Object(l.c)((function(e){return e.user.user.username}));if(Object(r.useEffect)((function(){W("".concat(O,"/articles/").concat(_),c,m)}),[]),!o)return n.a.createElement(P.a,{indicator:K});var T=a.title,w=a.favoritesCount,A=a.favorited,x=a.tagList,C=a.description,L=a.body,I=a.updatedAt,U=a.author,z=U.username,D=U.image;return n.a.createElement("article",{className:"article"},n.a.createElement("div",{className:"article-info"},n.a.createElement("div",{className:"article-info__header"},n.a.createElement("h5",{className:"article-info__title"},T),n.a.createElement("span",{className:"article-info__likes"},n.a.createElement(pe,{favorited:p,handleLikeArticle:function(){d(!A),k(b,_,h,!A)}}),n.a.createElement("span",{className:"article-info__likes-count"},w))),n.a.createElement("div",{className:"tags"},n.a.createElement(ce,{tagList:x})),n.a.createElement("div",{className:"article-info__desc"},n.a.createElement("p",{className:"article-info__text"},C)),n.a.createElement("div",{className:"article-info__desc"},n.a.createElement(Y.a,{source:L,escapeHtml:!1}))),n.a.createElement("div",{className:"article-container"},n.a.createElement("div",{className:"article-user"},n.a.createElement("div",{className:"user-info"},n.a.createElement("h6",{className:"user-info__name"},z),n.a.createElement("p",{className:"user-info__update"},Object(F.a)(new Date(I),"MMMM dd, yyyy"))),n.a.createElement("div",{className:"article-user__photo"},n.a.createElement("img",{src:D,alt:z,className:"article-user__img"}))),j&&y===z&&n.a.createElement(n.a.Fragment,null,n.a.createElement($.a,{title:"Are you sure to delete this article?",onConfirm:function(){(null===a||void 0===a?void 0:a.slug)&&(!function(e,t,a){fetch("".concat(O,"/articles/").concat(t),{method:"DELETE",headers:Object.assign(v,{Authorization:"Token ".concat(a)})}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(t){S(e,0)})).catch(console.error)}(b,a.slug,h),E.push("/"))},okText:"Yes",cancelText:"No"},n.a.createElement("input",{type:"button",value:"Delete",className:"btn btn-article-delete"})),n.a.createElement(g.b,{to:"/articles/".concat(_,"/edit")},n.a.createElement("input",{type:"button",value:"Edit",className:"btn btn-article-edit"})))))},Z=a(48),Q=(a(372),function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.user.isAuthentication})),a=Object(l.c)((function(e){return e.user.user})),c=Object(N.g)(),s=Object(Z.a)(),i=s.handleSubmit,o=s.register,m=s.errors;Object(r.useEffect)((function(){t||c.push("/sign-in")}),[t]);var u=a.username,f=void 0===u?"":u,p=a.email,d=void 0===p?"":p,_=a.image,E=void 0===_?"":_;return n.a.createElement("form",{action:"",onSubmit:i((function(t){for(var r={user:{}},n=0,c=Object.keys(t);n<c.length;n++){var s=c[n];a[s]!==t[s]&&t[s]&&(r.user[s]=t[s])}!function(e,t,a){fetch("".concat(O,"/user"),{method:"PUT",headers:Object.assign(v,{Authorization:"Token ".concat(a)}),body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(t){t.user&&e(j(t))})).catch(console.error)}(e,r,a.token)})),className:"form"},n.a.createElement("h3",{className:"form__title"},"Edit Profile"),n.a.createElement("label",{htmlFor:"username",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Username"),n.a.createElement("input",{type:"text",ref:o({required:!0,minLength:3,maxLength:20}),name:"username",id:"username",defaultValue:f,className:"form__input",placeholder:"Username"}),m.username&&n.a.createElement("span",{className:"form__input-error"},"Your username must be between 3 and 20 characters (inclusive).")),n.a.createElement("label",{htmlFor:"email",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Email address"),n.a.createElement("input",{type:"email",defaultValue:d,ref:o({required:!0,pattern:/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/}),name:"email",id:"email",className:"form__input",placeholder:"Email address"}),m.email&&n.a.createElement("span",{className:"form__input-error"},"Invalid email")),n.a.createElement("label",{htmlFor:"password",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"New password"),n.a.createElement("input",{type:"password",ref:o({minLength:6,maxLength:40}),name:"password",id:"password",className:"form__input",placeholder:"New password"}),m.password&&n.a.createElement("span",{className:"form__input-error"},"Your password must be between 6 and 40 characters (inclusive).")),n.a.createElement("label",{htmlFor:"url",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Avatar image (url)"),n.a.createElement("input",{type:"url",defaultValue:E,ref:o({pattern:/^((https?|ftp)\:\/\/)?([a-z0-9]{1})((\.[a-z0-9-])|([a-z0-9-]))*\.([a-z]{2,6})(\/?)$/}),name:"url",id:"repeat-password",className:"form__input",placeholder:"Avatar image (url)"}),m.url&&n.a.createElement("span",{className:"form__input-error"},"Invalid url - address.")),n.a.createElement("input",{type:"submit",className:"form__submit",value:"Save"}))}),ee=(a(373),!1),te=function(){var e=Object(N.g)(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.user.isAuthenticationOkey})),c=Object(l.c)((function(e){return e.user.isAuthentication})),s=Object(Z.a)(),i=s.register,o=s.handleSubmit,m=s.errors;return Object(r.useEffect)((function(){a||e.push("/")}),[a]),Object(r.useEffect)((function(){ee=!0,c&&e.push("/")}),[c]),n.a.createElement("form",{action:"",onSubmit:o((function(e){var a=e.email,r=e.password;!function(e,t){fetch("".concat(O,"/users/login"),{method:"POST",headers:v,body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(t){t.user.token?(e(j(t)),e(y(!1)),e(w(!0)),localStorage.setItem("uuid",JSON.stringify({token:t.user.token}))):e(y(!0))})).catch(console.error)}(t,{user:{email:a,password:r}})})),className:"form"},n.a.createElement("h3",{className:"form__title"},"Sign In"),n.a.createElement("label",{htmlFor:"email",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Email address"),n.a.createElement("input",{type:"email",ref:i({required:!0,pattern:/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/}),name:"email",id:"email",className:"form__input",placeholder:"Email address"}),m.email&&n.a.createElement("span",{className:"form__input-error"},"Invalid email")),n.a.createElement("label",{htmlFor:"password",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Password"),n.a.createElement("input",{type:"password",ref:i({required:!0}),name:"password",id:"password",className:"form__input",placeholder:"password"}),m.password&&n.a.createElement("span",{className:"form__input-error"},"Enter password")),n.a.createElement("input",{type:"submit",className:"form__submit",value:"Login"}),ee&&n.a.createElement("p",{className:"form__input-error"},"wrong login or password"),n.a.createElement("p",{className:"no-have-account"},"Don\\'t have an account?",n.a.createElement(g.b,{to:"/sign-up"},n.a.createElement("span",{className:"no-have-account__href-login"},"Sign Up"))))},ae=(a(374),!1),re=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.user.isRegisterOkey})),a=Object(l.c)((function(e){return e.user.isAuthentication})),c=Object(N.g)(),s=Object(Z.a)(),i=s.handleSubmit,o=s.register,m=s.errors;return Object(r.useEffect)((function(){ae=!0,t||c.push("/")}),[t]),Object(r.useEffect)((function(){a&&c.push("/")}),[a]),n.a.createElement("form",{action:"",onSubmit:i((function(t){var a=t.username,r=t.email,n=t.password;!function(e,t){fetch("".concat(O,"/users"),{method:"POST",headers:v,body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(t){t.user.token?(e(j(t)),e(T(!1))):e(T(!0))})).catch(console.error)}(e,{user:{username:a,email:r,password:n}})})),className:"form"},n.a.createElement("h3",{className:"form__title"},"Create new account"),n.a.createElement("label",{htmlFor:"username",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Username"),n.a.createElement("input",{type:"text",ref:o({required:!0,minLength:3,maxLength:20}),name:"username",id:"username",className:"form__input",placeholder:"Username"}),m.username&&n.a.createElement("span",{className:"form__input-error"},"Your username must be between 3 and 20 characters (inclusive).")),n.a.createElement("label",{htmlFor:"email",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Email address"),n.a.createElement("input",{type:"email",ref:o({required:!0,pattern:/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/}),name:"email",id:"email",className:"form__input",placeholder:"Email address"}),m.email&&n.a.createElement("span",{className:"form__input-error"},"Invalid email")),n.a.createElement("label",{htmlFor:"password",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Password"),n.a.createElement("input",{type:"password",ref:o({required:!0,minLength:6,maxLength:40}),name:"password",id:"password",className:"form__input",placeholder:"password"}),m.password&&n.a.createElement("span",{className:"form__input-error"},"Your password must be between 6 and 40 characters (inclusive).")),n.a.createElement("label",{htmlFor:"repeat-password",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Repeat password"),n.a.createElement("input",{type:"password",ref:o({required:!0,minLength:6,maxLength:40}),name:"repeat-password",id:"repeat-password",className:"form__input",placeholder:"password"}),m["repeat-password"]&&n.a.createElement("span",{className:"form__input-error"},"Passwords must match")),n.a.createElement("div",{className:"form__line"}),n.a.createElement("label",{htmlFor:"agree",className:"form__label form__checkbox-container"},n.a.createElement("input",{type:"checkbox",ref:o({required:!0}),name:"agree",className:"form__checkbox",id:"agree",defaultChecked:!0}),m.agree&&n.a.createElement("p",{className:"form__input-error"},"Confirm your consent to the processing of personal data."),n.a.createElement("span",{className:"form__label-text"},"I agree to the processing of my personal information")),n.a.createElement("input",{type:"submit",className:"form__submit",value:"Create"}),ae&&n.a.createElement("p",{className:"form__input-error"},"Failed to register"),n.a.createElement("p",{className:"already-account"},"Already have an account?",n.a.createElement(g.b,{to:"/sign-in"},n.a.createElement("span",{className:"already-account__href-login"},"Sign In"))))},ne=(a(375),function(e){var t=e.value;return n.a.createElement("span",{className:"tags__item"},t)}),ce=(a(376),function(e){var t=e.tagList;return n.a.createElement("div",{className:"tags"},t.map((function(e){return n.a.createElement(ne,{key:Object(U.a)(),value:e})})))}),se=(a(377),function(){var e=Object(N.g)(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.user.user.token})),c=Object(l.c)((function(e){return e.user.isAuthentication})),s=Object(r.useState)([]),i=Object(R.a)(s,2),o=i[0],f=i[1];return c||e.push("/log-in"),n.a.createElement(ie,{onSubmit:function(r){var n={article:Object(u.a)({},r)};n.article.tagList=Object(m.a)(o),function(e,t,a){fetch("".concat(O,"/articles"),{method:"POST",headers:Object.assign(v,{Authorization:"Token ".concat(a)}),body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(t){t.article&&e({type:"ARTICLE_UPDATE_NEW",payload:t.article})})).catch(console.error)}(t,n,a),e.push("/")},setTags:f,header:"Create new article",article:{title:"",description:"",body:"",tags:o}})}),le=function(){var e=Object(N.g)(),t=(Object(l.b)(),Object(N.h)().slug),a=Object(l.c)((function(e){return e.user.user.token})),c=Object(l.c)((function(e){return e.user.isAuthentication})),s=Object(l.c)((function(e){return e.articles.articles.find((function(e){return e.slug===t}))})),i=Object(r.useState)([]),o=Object(R.a)(i,2),f=o[0],p=o[1];return c||e.push("/log-in"),n.a.createElement(ie,{header:"Edit article",onSubmit:function(r){var n={article:Object(u.a)({},r)};n.article.tagList=Object(m.a)(f),function(e,t,a,r){fetch("".concat(O,"/articles/").concat(t),{method:"PUT",headers:Object.assign(v,{Authorization:"Token ".concat(r)}),body:JSON.stringify(a)}).then((function(e){if(e.ok)return e.json();throw{name:"Fetch error",message:"fetch error"}})).then((function(e){console.log(2,e)})).catch(console.error)}(0,t,n,a),e.push("/")},setTags:p,article:s})},ie=function(e){var t=e.onSubmit,a=e.setTags,c=e.header,s=e.article,l=(s=void 0===s?{title:"",description:"",body:"",tags:[]}:s).title,i=void 0===l?"":l,o=s.description,u=void 0===o?"":o,f=s.body,p=void 0===f?"":f,d=s.tags,_=void 0===d?[]:d,E=Object(Z.a)(),b=E.handleSubmit,h=E.register,g=E.errors,N=Object(r.useState)(""),O=Object(R.a)(N,2),v=O[0],j=O[1],y=Object(r.useState)(!0),T=Object(R.a)(y,2),w=T[0],A=T[1],S=function(e){var t=Number(e.currentTarget.dataset.id),r=Object(m.a)(_);r.splice(t,1),a(r)},k=function(e){var t=Number(e.currentTarget.dataset.id),r=Object(m.a)(_);r[t]=e.currentTarget.value,a(r)};return n.a.createElement("form",{action:"",onSubmit:b(t),className:"form article-form"},n.a.createElement("h3",{className:"form__title"},c),n.a.createElement("label",{htmlFor:"title",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Title"),n.a.createElement("input",{type:"text",ref:h({required:!0}),defaultValue:i,name:"title",id:"title",className:"form__input",placeholder:"Title"}),g.title&&n.a.createElement("span",{className:"form__input-error"},"Enter title")),n.a.createElement("label",{htmlFor:"short-description",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Short description"),n.a.createElement("input",{type:"text",ref:h({required:!0}),defaultValue:u,name:"description",id:"short-description",className:"form__input",placeholder:"Short description"}),g["Short description"]&&n.a.createElement("span",{className:"form__input-error"},"Enter Short description")),n.a.createElement("label",{htmlFor:"text",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Text"),n.a.createElement("textarea",{name:"body",defaultValue:p,ref:h({required:!0}),id:"text",className:"form__textarea",placeholder:"Text"}),g.text&&n.a.createElement("span",{className:"form__input-error"},"Enter text article")),n.a.createElement("label",{htmlFor:"",className:"form__label"},n.a.createElement("span",{className:"form__label-text"},"Tags"),n.a.createElement("div",{className:"tags-container"},_.map((function(e,t){return n.a.createElement("div",{className:"tag-container",key:Object(U.a)()},n.a.createElement("input",{type:"text",value:e,className:"tag-container__input","data-id":t,onChange:k}),n.a.createElement("input",{type:"button",value:"Delete",className:"tag-container__button-remove","data-id":t,onClick:S}))}))),w&&n.a.createElement("div",{className:"tags-form"},n.a.createElement("input",{type:"text",value:v,className:"tag-container__input",onChange:function(e){j(e.currentTarget.value)}}),n.a.createElement("input",{type:"button",value:"Delete",className:"tag-container__button-remove",onClick:function(){A(!1)}}),n.a.createElement("input",{type:"button",value:"Add tag",className:"tag-container__button-add",onClick:function(){var e=Object(m.a)(_);e.push(v),a(e),j("")}}))),n.a.createElement("input",{type:"submit",className:"form__submit article-form__input-submit",value:"Send"}))},oe=a(162),me=a.n(oe),ue=a(163),fe=a.n(ue),pe=function(e){var t=e.favorited,a=e.handleLikeArticle;return n.a.createElement("img",{src:t?fe.a:me.a,alt:"like btn",onClick:a,className:"article-info__likes-btn"})};s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(l.a,{store:h},n.a.createElement(L,null))),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.922573fe.chunk.js.map