(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{135:function(e,a,t){e.exports=t.p+"static/media/Rectangle 1.1197b293.svg"},136:function(e,a,t){e.exports=t.p+"static/media/Vector.d17fcd0b.svg"},153:function(e,a,t){e.exports=t.p+"static/media/Vector.d17fcd0b.svg"},161:function(e,a,t){e.exports=t(366)},170:function(e,a,t){},172:function(e,a,t){},173:function(e,a,t){},174:function(e,a,t){},175:function(e,a,t){},344:function(e,a){},363:function(e,a,t){},364:function(e,a,t){},365:function(e,a,t){},366:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(19),s=t.n(c),l=t(6),i=t(38),o=t(134),m=t(66),u={page:0,totalPage:0,articles:[],isLoading:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload,r=Object(m.a)({},e);switch(t){case"ARTICLE_UPDATE":return Object.assign(r,{articles:n});case"ARTICLE_PAGE":return Object.assign(r,{page:n});case"ARTICAL_TOTAL_PAGE_UPDATE":return Object.assign(r,{totalPage:n});case"FETCH_ARTICAL_LOAD":return Object.assign(r,{isLoading:n});default:return r}},f={user:{},isAuthentication:!1,isAuthenticationOkey:!0,isRegisterOkey:!0},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload,r=Object(m.a)({},e);switch(t){case"FETCH_USER_AUTHENTICATION":return Object.assign(r,{user:n.user});case"FETCH_USER_AUTHENTICATION_ERROR":return Object.assign(r,{isAuthenticationOkey:!1});case"FETCH_USER_AUTHORIZED":return Object.assign(r,{isAuthentication:n});case"FETCH_USER_REGISTER_ERROR":return Object.assign(r,{isRegisterOkey:!1});case"USER_LOGOUT":return f;default:return r}},d=Object(i.c)({articles:p,user:_}),E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,b=Object(i.e)(d,E(Object(i.a)(o.a))),h=t(15),N=t(9),g=function(e){return{type:"FETCH_ARTICAL_LOAD",payload:e}},O=function(e){return{type:"FETCH_USER_AUTHENTICATION",payload:e}},v=function(e){return{type:"FETCH_USER_AUTHENTICATION_ERROR",payload:e}},y=function(e){return{type:"FETCH_USER_REGISTER_ERROR",payload:e}},j=function(e){return{type:"FETCH_USER_AUTHORIZED",payload:e}},w=(t(170),t(135)),T=t.n(w),A=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.articles.page})),t=Object(l.c)((function(e){return e.user.isAuthentication})),c=Object(l.c)((function(e){return e.user.user}));Object(n.useEffect)((function(){!function(e){try{var a=localStorage.getItem("uuid");if(a){var t=JSON.parse(a).token;t&&fetch("https://conduit.productionready.io/api/user",{headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Token ".concat(t)}}).then((function(e){return e.json()})).then((function(a){e(O(a)),e(j(!0))})).catch(console.error)}}catch(n){console.error(n)}}(e)}),[]),Object(n.useEffect)((function(){!function(e,a){fetch("https://conduit.productionready.io/api/articles?limit=20&offset=".concat(20*a)).then((function(e){return e.json()})).then((function(a){var t=a.articles,n=a.articlesCount;e(function(e){return{type:"ARTICAL_TOTAL_PAGE_UPDATE",payload:e}}(n)),e(function(e){return{type:"ARTICLE_UPDATE",payload:e}}(t)),e(g(!0))})).catch(console.error)}(e,a)}),[e,a]);var s;if(t){var i=c.username,o=c.image;s=r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{to:"/new-article"},r.a.createElement("input",{type:"button",value:"Create article",className:"btn btn-create-article"})),r.a.createElement("div",{className:"article-user"},r.a.createElement("div",{className:"user-info"},r.a.createElement(h.b,{to:"/profile"},r.a.createElement("h6",{className:"user-info__name"},i))),r.a.createElement("div",{className:"article-user__photo"},r.a.createElement(h.b,{to:"/profile"},r.a.createElement("img",{src:o||T.a,alt:i,className:"article-user__img"})))),r.a.createElement("input",{type:"button",onClick:function(){e((localStorage.removeItem("uuid"),{type:"USER_LOGOUT"}))},value:"Log Out",className:"btn btn-logout"}))}else s=r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{to:"/sign-in"},r.a.createElement("input",{type:"button",value:"Sign In",className:"btn btn-signin controls__btn-signin"})),r.a.createElement(h.b,{to:"/sign-up"},r.a.createElement("input",{type:"button",value:"Sign Up",className:"btn btn-signup"})));return r.a.createElement("div",{className:"wrapper"},r.a.createElement(h.a,null,r.a.createElement("header",{className:"header wrapper__header"},r.a.createElement(h.b,{to:"/"},r.a.createElement("h6",{className:"header__title"},"Realworld Blog")),r.a.createElement("div",{className:"controls"},s)),r.a.createElement("main",{className:"main"},r.a.createElement(N.d,null,r.a.createElement(N.b,{path:"/",component:H,exact:!0}),r.a.createElement(N.b,{path:"/articles",component:H,exact:!0}),r.a.createElement(N.b,{path:"/articles/:slug",component:Z}),r.a.createElement(N.b,{path:"/sign-in",component:W}),r.a.createElement(N.b,{path:"/sign-up",component:ee}),r.a.createElement(N.b,{path:"/profile",component:K}),r.a.createElement(N.a,{to:"/"})))))},R=t(368),S=t(74),C=(t(172),function(e){var a=e.value;return r.a.createElement("span",{className:"tags__item"},a)}),k=(t(173),function(e){var a=e.tagList;return r.a.createElement("div",{className:"tags"},a.map((function(e){return r.a.createElement(C,{key:Object(S.a)(),value:e})})))}),L=(t(174),t(136)),x=t.n(L),I=function(e){var a=e.slug,t=e.title,n=e.description,c=e.updatedAt,s=e.favoritesCount,l=e.tagList,i=e.author,o=i.username,m=i.image;return r.a.createElement("article",{className:"article"},r.a.createElement("div",{className:"article-info"},r.a.createElement("div",{className:"article-info__header"},r.a.createElement(h.b,{to:"articles/".concat(a)},r.a.createElement("h5",{className:"article-info__title"},t)),r.a.createElement("span",{className:"article-info__likes"},r.a.createElement("img",{src:x.a,alt:"like btn",className:"article-info__likes-btn"}),r.a.createElement("span",{className:"article-info__likes-count"},s))),r.a.createElement("div",{className:"tags"},r.a.createElement(k,{tagList:l})),r.a.createElement("div",{className:"article-info__desc"},r.a.createElement("p",{className:"article-info__text"},n))),r.a.createElement("div",{className:"article-user"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h6",{className:"user-info__name"},o),r.a.createElement("p",{className:"user-info__update"},Object(R.a)(new Date(c),"MMMM dd, yyyy"))),r.a.createElement("div",{className:"article-user__photo"},r.a.createElement("img",{src:m,alt:o,className:"article-user__img"}))))},U=t(367),z=t(371),F=t(369),P=(t(175),t(176),r.a.createElement(F.a,{style:{fontSize:24},spin:!0})),H=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.articles.articles})),t=Object(l.c)((function(e){return e.articles.isLoading})),n=Object(l.c)((function(e){return e.articles.totalPage}));return a&&t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"article-list"},a.map((function(e){return r.a.createElement(I,Object.assign({key:Object(S.a)()},e))}))),r.a.createElement(U.a,{onChange:function(a){e(function(e){return{type:"ARTICLE_PAGE",payload:e}}(a)),e(g(!1))},size:"small",showQuickJumper:!1,total:n})):r.a.createElement(z.a,{indicator:P})},D=t(28),M=t(8),q=t.n(M),G=t(27),J=t(152),V=t.n(J),Y=t(153),$=t.n(Y),B=function(){var e=Object(G.a)(q.a.mark((function e(a){var t,n,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a);case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,r=n.article,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),X=r.a.createElement(F.a,{style:{fontSize:24},spin:!0}),Z=function(){var e=Object(n.useState)(),a=Object(D.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(!1),l=Object(D.a)(s,2),i=l[0],o=l[1],m=Object(N.h)().slug,u=function(){var e=Object(G.a)(q.a.mark((function e(a){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(a);case 2:(t=e.sent)&&(c(t),o(!0));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){u("https://conduit.productionready.io/api/articles/".concat(m))}),[]),!i)return r.a.createElement(z.a,{indicator:X});var p=t.title,f=t.favoritesCount,_=t.tagList,d=t.description,E=t.body,b=t.updatedAt,h=t.author,g=h.username,O=h.image;return r.a.createElement("article",{className:"article"},r.a.createElement("div",{className:"article-info"},r.a.createElement("div",{className:"article-info__header"},r.a.createElement("h5",{className:"article-info__title"},p),r.a.createElement("span",{className:"article-info__likes"},r.a.createElement("img",{src:$.a,alt:"like btn",className:"article-info__likes-btn"}),r.a.createElement("span",{className:"article-info__likes-count"},f))),r.a.createElement("div",{className:"tags"},r.a.createElement(k,{tagList:_})),r.a.createElement("div",{className:"article-info__desc"},r.a.createElement("p",{className:"article-info__text"},d)),r.a.createElement("div",{className:"article-info__desc"},r.a.createElement(V.a,{source:E,escapeHtml:!1}))),r.a.createElement("div",{className:"article-user"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h6",{className:"user-info__name"},g),r.a.createElement("p",{className:"user-info__update"},Object(R.a)(new Date(b),"MMMM dd, yyyy"))),r.a.createElement("div",{className:"article-user__photo"},r.a.createElement("img",{src:O,alt:g,className:"article-user__img"}))))},Q=t(56),K=(t(363),function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.user.isAuthentication})),t=Object(l.c)((function(e){return e.user.user})),c=Object(N.g)(),s=Object(Q.a)(),i=s.handleSubmit,o=s.register,m=s.errors;Object(n.useEffect)((function(){a||c.push("/sign-in")}),[a]);var u=t.username,p=void 0===u?"":u,f=t.email,_=void 0===f?"":f,d=t.image,E=void 0===d?"":d;return r.a.createElement("form",{action:"",onSubmit:i((function(a){for(var n={user:{}},r=0,c=Object.keys(a);r<c.length;r++){var s=c[r];t[s]!==a[s]&&a[s]&&(n.user[s]=a[s])}!function(e,a,t){fetch("https://conduit.productionready.io/api/user",{method:"PUT",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Token ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(a){e(O(a))})).catch(console.error)}(e,n,t.token)})),className:"form"},r.a.createElement("h3",{className:"form__title"},"Edit Profile"),r.a.createElement("label",{htmlFor:"username",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Username"),r.a.createElement("input",{type:"text",ref:o({required:!0,minLength:3,maxLength:20}),name:"username",id:"username",defaultValue:p,className:"form__input",placeholder:"Username"}),m.username&&r.a.createElement("span",{className:"form__input-error"},"Your username must be between 3 and 20 characters (inclusive).")),r.a.createElement("label",{htmlFor:"email",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Email address"),r.a.createElement("input",{type:"email",defaultValue:_,ref:o({required:!0,pattern:/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/}),name:"email",id:"email",className:"form__input",placeholder:"Email address"}),m.email&&r.a.createElement("span",{className:"form__input-error"},"Invalid email")),r.a.createElement("label",{htmlFor:"password",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"New password"),r.a.createElement("input",{type:"password",ref:o({minLength:6,maxLength:40}),name:"password",id:"password",className:"form__input",placeholder:"New password"}),m.password&&r.a.createElement("span",{className:"form__input-error"},"Your password must be between 6 and 40 characters (inclusive).")),r.a.createElement("label",{htmlFor:"url",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Avatar image (url)"),r.a.createElement("input",{type:"url",defaultValue:E,ref:o({pattern:/^((https?|ftp)\:\/\/)?([a-z0-9]{1})((\.[a-z0-9-])|([a-z0-9-]))*\.([a-z]{2,6})(\/?)$/}),name:"url",id:"repeat-password",className:"form__input",placeholder:"Avatar image (url)"}),m.url&&r.a.createElement("span",{className:"form__input-error"},"Invalid url - address.")),r.a.createElement("input",{type:"submit",className:"form__submit",value:"Save"}))}),W=(t(364),function(){var e=Object(N.g)(),a=Object(l.b)(),t=Object(l.c)((function(e){return e.user.isAuthenticationOkey})),c=Object(l.c)((function(e){return e.user.isAuthentication})),s=Object(Q.a)(),i=s.register,o=s.handleSubmit,m=s.errors;return c&&e.push("/"),Object(n.useEffect)((function(){t||e.push("/")}),[t]),r.a.createElement("form",{action:"",onSubmit:o((function(e){var t=e.email,n=e.password;!function(e,a){fetch("https://conduit.productionready.io/api/users/login",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(a){a.user.token?(e(O(a)),e(v(!1)),e(j(!0)),localStorage.setItem("uuid",JSON.stringify({token:a.user.token}))):e(v(!0))})).catch(console.error)}(a,{user:{email:t,password:n}})})),className:"form"},r.a.createElement("h3",{className:"form__title"},"Sign In"),r.a.createElement("label",{htmlFor:"email",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Email address"),r.a.createElement("input",{type:"email",ref:i({required:!0,pattern:/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/}),name:"email",id:"email",className:"form__input",placeholder:"Email address"}),m.email&&r.a.createElement("span",{className:"form__input-error"},"Invalid email")),r.a.createElement("label",{htmlFor:"password",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Password"),r.a.createElement("input",{type:"password",ref:i({required:!0}),name:"password",id:"password",className:"form__input",placeholder:"password"}),m.password&&r.a.createElement("span",{className:"form__input-error"},"Enter password")),r.a.createElement("input",{type:"submit",className:"form__submit",value:"Login"}),r.a.createElement("p",{className:"no-have-account"},"Don\\'t have an account?",r.a.createElement(h.b,{to:"/sign-up"},r.a.createElement("span",{className:"no-have-account__href-login"},"Sign Up"))))}),ee=(t(365),function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.user.isRegisterOkey})),t=Object(l.c)((function(e){return e.user.isAuthentication})),c=Object(N.g)(),s=Object(Q.a)(),i=s.handleSubmit,o=s.register,m=s.errors;return t&&c.push("/"),Object(n.useEffect)((function(){a||c.push("/")}),[a]),r.a.createElement("form",{action:"",onSubmit:i((function(a){var t=a.username,n=a.email,r=a.password;!function(e,a){fetch("https://conduit.productionready.io/api/users",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(a){a.user.token?e(y(!1)):e(y(!0))})).catch(console.error)}(e,{user:{username:t,email:n,password:r}})})),className:"form"},r.a.createElement("h3",{className:"form__title"},"Create new account"),r.a.createElement("label",{htmlFor:"username",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Username"),r.a.createElement("input",{type:"text",ref:o({required:!0,minLength:3,maxLength:20}),name:"username",id:"username",className:"form__input",placeholder:"Username"}),m.username&&r.a.createElement("span",{className:"form__input-error"},"Your username must be between 3 and 20 characters (inclusive).")),r.a.createElement("label",{htmlFor:"email",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Email address"),r.a.createElement("input",{type:"email",ref:o({required:!0,pattern:/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/}),name:"email",id:"email",className:"form__input",placeholder:"Email address"}),m.email&&r.a.createElement("span",{className:"form__input-error"},"Invalid email")),r.a.createElement("label",{htmlFor:"password",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Password"),r.a.createElement("input",{type:"password",ref:o({required:!0,minLength:6,maxLength:40}),name:"password",id:"password",className:"form__input",placeholder:"password"}),m.password&&r.a.createElement("span",{className:"form__input-error"},"Your password must be between 6 and 40 characters (inclusive).")),r.a.createElement("label",{htmlFor:"repeat-password",className:"form__label"},r.a.createElement("span",{className:"form__label-text"},"Repeat password"),r.a.createElement("input",{type:"password",ref:o({required:!0,minLength:6,maxLength:40}),name:"repeat-password",id:"repeat-password",className:"form__input",placeholder:"password"}),m["repeat-password"]&&r.a.createElement("span",{className:"form__input-error"},"Passwords must match")),r.a.createElement("div",{className:"form__line"}),r.a.createElement("label",{htmlFor:"agree",className:"form__label form__checkbox-container"},r.a.createElement("input",{type:"checkbox",ref:o({required:!0}),name:"agree",className:"form__checkbox",id:"agree",defaultChecked:!0}),m.agree&&r.a.createElement("p",{className:"form__input-error"},"Confirm your consent to the processing of personal data."),r.a.createElement("span",{className:"form__label-text"},"I agree to the processing of my personal information")),r.a.createElement("input",{type:"submit",className:"form__submit",value:"Create"}),r.a.createElement("p",{className:"already-account"},"Already have an account?",r.a.createElement(h.b,{to:"/sign-in"},r.a.createElement("span",{className:"already-account__href-login"},"Sign In"))))});s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:b},r.a.createElement(A,null))),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.047e56a3.chunk.js.map